<header class="task-list-header">
  <h1>Today's Todo List</h1>
</header>

<main class="todo-container">
  <!-- Task Input -->
  <div class="add-task">
    <input [(ngModel)]="newTask" placeholder="Enter new task here"/>
    <button (click)="addTask()">
      Add
    </button>
  </div>

  <!-- Task List -->
  <div class="task-list-container">
    <ul class="task-list">
      <li *ngFor="let todoItem of todoList; let i = index" [ngClass]="{'completed': todoItem.completed}">
        <div class="task-grid">
          <!-- Checkbox (Updates `Completed` status in DB) -->
          <input
            (change)="toogleCompletion(todoItem)"
            [checked]="todoItem.completed"
            type="checkbox"
          />

          <!-- Task Text (Editing Mode) -->
          <span *ngIf="editingTaskId !== todoItem.id" [class.completed]="todoItem.completed">
          {{ todoItem.task }}
        </span>
          <input *ngIf="editingTaskId === todoItem.id" [(ngModel)]="editedTask" class="edit-input"/>

          <!-- Action Buttons -->
          <div class="task-actions">
            <!-- Edit Button -->
            <button (click)="startEditing(todoItem)" *ngIf="editingTaskId !== todoItem.id" class="edit-btn">
              Edit
            </button>

            <!-- Save & Cancel Buttons (Shown in Editing Mode) -->
            <button (click)="saveTask(todoItem)" *ngIf="editingTaskId === todoItem.id" class="save-btn">
              Save
            </button>
            <button (click)="cancelEditing()" *ngIf="editingTaskId === todoItem.id" class="cancel-btn">
              Cancel
            </button>
            <button (click)="deleteTask(todoItem)"
                    *ngIf="!todoItem.isDeleted"
                    class="delete-btn">
              Delete
            </button>
          </div>
        </div>
      </li>
    </ul>
  </div>

</main>

<router-outlet></router-outlet>
